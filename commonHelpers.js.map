{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n\nconst simpleLightbox = new SimpleLightbox('.gallery a', {\n                captionsData: 'alt',\n                captionDelay: 250,\n                });\n\nconst loader = document.getElementById('loader');\nconst imageGallery = document.getElementById('imageGallery');\nconst loadMoreButton = document.getElementById('loadMoreButton');\nlet currentPage = 1;\n\n\n\nfunction showLoader() {\n    loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\nfunction clearGallery() {\n        imageGallery.innerHTML = '';\n}\n    \n\n\n\n\nasync function searchImages(searchInput, page = 1) {\n    const apiKey = '41282731-c9c58555d497b62011b46ee39';\n    const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${searchInput}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`;\n    \n\n\n    try {\n        const response = await axios.get(apiUrl);\n        return response.data;\n    } catch (error) {\n        throw error;\n    }\n}\n\ndocument.getElementById('searchForm').addEventListener('submit', async function (event) {\n    event.preventDefault();\n    const searchInput = document.getElementById('searchInput').value.trim();\n\n    if (!searchInput) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, the text input field is empty. Please try again.',\n            position: 'topCenter',\n        });\n        return;\n    }\n\n    try {\n        showLoader();\n        const data = await searchImages(searchInput);\n\n        hideLoader();\n\n        if (data.hits.length > 0) {\n            const imageCardsHTML = data.hits.map(image => `\n                <a href=\"${image.largeImageURL}\" data-lightbox=\"image-gallery\" class=\"image-card\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                    <div class=\"image-details\">\n                        <p><strong>Likes:</strong> ${image.likes}</p>\n                        <p><strong>Views:</strong> ${image.views}</p>\n                        <p><strong>Comments:</strong> ${image.comments}</p>\n                        <p><strong>Downloads:</strong> ${image.downloads}</p>\n                    </div>\n                </a>\n            `).join('');\n\n            imageGallery.innerHTML = imageCardsHTML;\n            simpleLightbox.refresh();\n            \n           \n\n            loadMoreButton.style.display = 'block';\n            loadMoreButton.addEventListener('click', loadMoreImages);\n        }\n        \n        else {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again.',\n                position: 'topCenter',\n            });\n        }\n    }\n        catch (error) {\n        console.error('Error:', error);\n    }\n});\n\nasync function loadMoreImages() {\n    try {\n\n        loadMoreButton.style.display = 'none';\n        showLoader();\n        currentPage++;\n        const searchInput = document.getElementById('searchInput').value.trim();\n        const data = await searchImages(searchInput, currentPage);\n\n        hideLoader();\n\n        if (data.hits.length > 0) {\n            const imageCardsHTML = data.hits.map(image => `\n                <a href=\"${image.largeImageURL}\" data-lightbox=\"image-gallery\" class=\"image-card\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                    <div class=\"image-details\">\n                        <p><strong>Likes:</strong> ${image.likes}</p>\n                        <p><strong>Views:</strong> ${image.views}</p>\n                        <p><strong>Comments:</strong> ${image.comments}</p>\n                        <p><strong>Downloads:</strong> ${image.downloads}</p>\n                    </div>\n                </a>\n            `).join('');\n\n            \n            imageGallery.innerHTML += imageCardsHTML;\n            simpleLightbox.refresh();\n\n             const cardHeight = document.querySelector('.image-card').getBoundingClientRect().height;\n            \n             window.scrollBy({\n                top: 2 * cardHeight,\n                behavior: 'smooth'\n            });\n        }\n\n         if (data.totalHits > currentPage * 40) {\n                \n            loadMoreButton.style.display = 'block';\n         }\n          else {\n               \n                loadMoreButton.style.display = 'none';\n                iziToast.info({\n                    title: 'End of Search Results',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topCenter',\n                });\n            }\n    }\n    \n    catch (error) {\n        console.error('Error:', error);\n    }\n}"],"names":["simpleLightbox","SimpleLightbox","loader","imageGallery","loadMoreButton","currentPage","showLoader","hideLoader","searchImages","searchInput","page","apiUrl","axios","error","event","iziToast","data","imageCardsHTML","image","loadMoreImages","cardHeight"],"mappings":"owBAOA,MAAMA,EAAiB,IAAIC,EAAe,aAAc,CACxC,aAAc,MACd,aAAc,GAC9B,CAAiB,EAEXC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAe,SAAS,eAAe,cAAc,EACrDC,EAAiB,SAAS,eAAe,gBAAgB,EAC/D,IAAIC,EAAc,EAIlB,SAASC,GAAa,CAClBJ,EAAO,MAAM,QAAU,OAC3B,CAEA,SAASK,GAAa,CAClBL,EAAO,MAAM,QAAU,MAC3B,CAUA,eAAeM,EAAaC,EAAaC,EAAO,EAAG,CAE/C,MAAMC,EAAS,qEAA4CF,kEAA4EC,gBAIvI,GAAI,CAEA,OADiB,MAAME,EAAM,IAAID,CAAM,GACvB,IACnB,OAAQE,EAAP,CACE,MAAMA,CACT,CACL,CAEA,SAAS,eAAe,YAAY,EAAE,iBAAiB,SAAU,eAAgBC,EAAO,CACpFA,EAAM,eAAc,EACpB,MAAML,EAAc,SAAS,eAAe,aAAa,EAAE,MAAM,OAEjE,GAAI,CAACA,EAAa,CACdM,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0DACT,SAAU,WACtB,CAAS,EACD,MACH,CAED,GAAI,CACAT,IACA,MAAMU,EAAO,MAAMR,EAAaC,CAAW,EAI3C,GAFAF,IAEIS,EAAK,KAAK,OAAS,EAAG,CACtB,MAAMC,EAAiBD,EAAK,KAAK,IAAIE,GAAS;AAAA,2BAC/BA,EAAM;AAAA,gCACDA,EAAM,sBAAsBA,EAAM;AAAA;AAAA,qDAEbA,EAAM;AAAA,qDACNA,EAAM;AAAA,wDACHA,EAAM;AAAA,yDACLA,EAAM;AAAA;AAAA;AAAA,aAGlD,EAAE,KAAK,EAAE,EAEVf,EAAa,UAAYc,EACzBjB,EAAe,QAAO,EAItBI,EAAe,MAAM,QAAU,QAC/BA,EAAe,iBAAiB,QAASe,CAAc,CAC1D,MAGGJ,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,WAC1B,CAAa,CAER,OACUF,EAAP,CACA,QAAQ,MAAM,SAAUA,CAAK,CAChC,CACL,CAAC,EAED,eAAeM,GAAiB,CAC5B,GAAI,CAEAf,EAAe,MAAM,QAAU,OAC/BE,IACAD,IACA,MAAMI,EAAc,SAAS,eAAe,aAAa,EAAE,MAAM,OAC3DO,EAAO,MAAMR,EAAaC,EAAaJ,CAAW,EAIxD,GAFAE,IAEIS,EAAK,KAAK,OAAS,EAAG,CACtB,MAAMC,EAAiBD,EAAK,KAAK,IAAIE,GAAS;AAAA,2BAC/BA,EAAM;AAAA,gCACDA,EAAM,sBAAsBA,EAAM;AAAA;AAAA,qDAEbA,EAAM;AAAA,qDACNA,EAAM;AAAA,wDACHA,EAAM;AAAA,yDACLA,EAAM;AAAA;AAAA;AAAA,aAGlD,EAAE,KAAK,EAAE,EAGVf,EAAa,WAAac,EAC1BjB,EAAe,QAAO,EAErB,MAAMoB,EAAa,SAAS,cAAc,aAAa,EAAE,sBAAuB,EAAC,OAEjF,OAAO,SAAS,CACb,IAAK,EAAIA,EACT,SAAU,QAC1B,CAAa,CACJ,CAEIJ,EAAK,UAAYX,EAAc,GAEhCD,EAAe,MAAM,QAAU,SAI3BA,EAAe,MAAM,QAAU,OAC/BW,EAAS,KAAK,CACV,MAAO,wBACP,QAAS,6DACT,SAAU,WAC9B,CAAiB,EAEZ,OAEMF,EAAP,CACI,QAAQ,MAAM,SAAUA,CAAK,CAChC,CACL"}