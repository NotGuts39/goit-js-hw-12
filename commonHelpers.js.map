{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n\nconst simpleLightbox = new SimpleLightbox('.gallery a', {\n                captionsData: 'alt',\n                captionDelay: 250,\n                });\n\nconst loader = document.getElementById('loader');\nconst imageGallery = document.getElementById('imageGallery');\nconst loadMoreButton = document.getElementById('loadMoreButton');\nlet currentPage = 1;\nlet isNewSearch = false;\n\n\n\nfunction showLoader() {\n    loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\nfunction clearGallery() {\n        imageGallery.innerHTML = '';\n}\n    \n\n\n\n\nasync function searchImages(searchInput, page = 1) {\n    const apiKey = '41282731-c9c58555d497b62011b46ee39';\n    const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${searchInput}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`;\n    \n\n\n    try {\n        const response = await axios.get(apiUrl);\n        return response.data;\n    } catch (error) {\n        throw error;\n    }\n}\n\ndocument.getElementById('searchForm').addEventListener('submit', async function (event) {\n    event.preventDefault();\n    const searchInput = document.getElementById('searchInput').value.trim();\nloadMoreButton.style.display = 'none';\n    \n\n    if (!searchInput) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, the text input field is empty. Please try again.',\n            position: 'topCenter',\n        });\n        return;\n    }\n\n    \n\n     currentPage = 1;\n\n    try {\n        showLoader();\n        const { hits, totalHits } = await searchImages(searchInput);\n\n        hideLoader();\n        clearGallery()\n        \n\n        if (hits.length > 0) {\n            const imageCardsHTML = hits.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => `\n                <a href=\"${largeImageURL}\" data-lightbox=\"image-gallery\" class=\"image-card\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\">\n                    <div class=\"image-details\">\n                        <p><strong>Likes:</strong> ${likes}</p>\n                        <p><strong>Views:</strong> ${views}</p>\n                        <p><strong>Comments:</strong> ${comments}</p>\n                        <p><strong>Downloads:</strong> ${downloads}</p>\n                    </div>\n                </a>\n            `).join('');\n\n            imageGallery.insertAdjacentHTML('beforeend', imageCardsHTML);\n            simpleLightbox.refresh();\n            \n           \n            if(totalHits > currentPage * 40 && hits.length >= 40)\n{\n            loadMoreButton.style.display = 'block';\n            loadMoreButton.addEventListener('click', loadMoreImages);  }\n            \n        }\n        \n        else {\n            loadMoreButton.style.display = 'none';\n\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again.',\n                position: 'topCenter',\n            });\n            \n        }\n    }\n        catch (error) {\n        console.error('Error:', error);\n    }\n\n        \n}  );\n\nasync function loadMoreImages() {\n    try {\n\n        loadMoreButton.style.display = 'none';\n        showLoader();\n        currentPage++;\n        const searchInput = document.getElementById('searchInput').value.trim();\n        const { hits, totalHits } = await searchImages(searchInput, currentPage);\n\n        hideLoader();\n\n        if (hits.length > 0) {\n            const imageCardsHTML = hits.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => `\n                <a href=\"${largeImageURL}\" data-lightbox=\"image-gallery\" class=\"image-card\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\">\n                    <div class=\"image-details\">\n                        <p><strong>Likes:</strong> ${likes}</p>\n                        <p><strong>Views:</strong> ${views}</p>\n                        <p><strong>Comments:</strong> ${comments}</p>\n                        <p><strong>Downloads:</strong> ${downloads}</p>\n                    </div>\n                </a>\n            `).join('');\n\n            \n            imageGallery.insertAdjacentHTML('beforeend', imageCardsHTML);\n            simpleLightbox.refresh();\n\n             const cardHeight = document.querySelector('.image-card').getBoundingClientRect().height;\n            \n             window.scrollBy({\n                top: 4 * cardHeight,\n                behavior: 'smooth'\n            });\n        }\n\n         if (totalHits > currentPage * 40 && hits.length >= 40) {\n                \n            loadMoreButton.style.display = 'block';\n         }\n          else {\n               \n             loadMoreButton.style.display = 'none';\n             \n                iziToast.info({\n                    title: 'End of Search Results',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topCenter',\n                });\n            }\n    }\n    \n    catch (error) {\n        console.error('Error:', error);\n    }\n}\n\ndocument.getElementById('searchForm').addEventListener('submit', function () {\n    isNewSearch = true;\n});"],"names":["simpleLightbox","SimpleLightbox","loader","imageGallery","loadMoreButton","currentPage","showLoader","hideLoader","clearGallery","searchImages","searchInput","page","apiUrl","axios","error","event","iziToast","hits","totalHits","imageCardsHTML","largeImageURL","webformatURL","tags","likes","views","comments","downloads","loadMoreImages","cardHeight"],"mappings":"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"}